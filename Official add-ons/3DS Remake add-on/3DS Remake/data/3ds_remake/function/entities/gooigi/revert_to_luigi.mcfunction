tag @s remove gooigi
scoreboard players add @s Health 50
scoreboard players set @s MaxHealth 100
scoreboard players reset @s MaxHealthTime
function luigis_mansion:entities/player/run_command_as_model {command:"tag @s add remove_from_existence"}

function luigis_mansion:entities/player/memory/get with entity @s
data modify storage luigis_mansion:data inventory set from entity @s Inventory
data modify storage luigis_mansion:data inventory[{components:{"minecraft:custom_data":{is_poltergust:1b}}}].components set value {"minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:custom_model_data":{flags:[B;0b],strings:["nozzle"]},"minecraft:item_model":"luigis_mansion:poltergust_3000","minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.poltergust_3000"},"minecraft:lore":[{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.none",color:"gray"}]}],"minecraft:custom_data":{namespace:"luigis_mansion",id:"poltergust_3000",is_poltergust:1b,is_nozzle:1b,model_data:{body_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body"]}}}}}},body_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body"]}}}}}},body_sat_on_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_sat_on"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_sat_on"]}}}}}},body_sat_on_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_sat_on"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_sat_on"]}}}}}},body_idle_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_idle"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_idle"]}}}}}},body_idle_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_idle"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_idle"]}}}}}}},kill:1b}}
execute if data storage luigis_mansion:data my_memory{poltergust_element:"fire"} run data modify storage luigis_mansion:data inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.fire",color:"red"}]}]
execute if data storage luigis_mansion:data my_memory{poltergust_element:"water"} run data modify storage luigis_mansion:data inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.water",color:"blue"}]}]
execute if data storage luigis_mansion:data my_memory{poltergust_element:"ice"} run data modify storage luigis_mansion:data inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.ice",color:"white"}]}]
data modify storage luigis_mansion:data inventory[{components:{"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight"}}}].components set value {"minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:item_model":"luigis_mansion:flashlight","minecraft:custom_model_data":{flags:[B;1b]},"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.flashlight"},"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight",is_nozzle:1b,kill:1b,keep_when_shrunk:1b,model_data:{on:{components:{"minecraft:custom_model_data":{flags:[B;1b]}}},off:{components:{"minecraft:custom_model_data":{flags:[B;0b]}}}}}}
execute if entity @s[tag=!flashlight] run data modify storage luigis_mansion:data inventory[{components:{"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight"}}}] merge from storage luigis_mansion:data inventory[{components:{"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight"}}}].components."minecraft:custom_data".model_data.off
function luigis_mansion:other/sync_inventory
execute if entity @s[tag=using_selection_menu] run data modify storage luigis_mansion:data my_memory.selection_menu.inventory[{components:{"minecraft:custom_data":{is_poltergust:1b}}}].components set value {"minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:custom_model_data":{flags:[B;0b],strings:["nozzle"]},"minecraft:item_model":"luigis_mansion:poltergust_3000","minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.poltergust_3000"},"minecraft:lore":[{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.none",color:"gray"}]}],"minecraft:custom_data":{namespace:"luigis_mansion",id:"poltergust_3000",is_poltergust:1b,is_nozzle:1b,model_data:{body_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body"]}}}}}},body_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body"]}}}}}},body_sat_on_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_sat_on"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_sat_on"]}}}}}},body_sat_on_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_sat_on"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_sat_on"]}}}}}},body_idle_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_idle"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_idle"]}}}}}},body_idle_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_idle"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_idle"]}}}}}}},kill:1b}}
execute if entity @s[tag=using_selection_menu] if data storage luigis_mansion:data my_memory{poltergust_element:"fire"} run data modify storage luigis_mansion:data my_memory.selection_menu.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.fire",color:"red"}]}]
execute if entity @s[tag=using_selection_menu] if data storage luigis_mansion:data my_memory{poltergust_element:"water"} run data modify storage luigis_mansion:data my_memory.selection_menu.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.water",color:"blue"}]}]
execute if entity @s[tag=using_selection_menu] if data storage luigis_mansion:data my_memory{poltergust_element:"ice"} run data modify storage luigis_mansion:data my_memory.selection_menu.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.ice",color:"white"}]}]
execute if entity @s[tag=using_selection_menu] run data modify storage luigis_mansion:data my_memory.selection_menu.inventory[{components:{"minecraft:custom_data":{id:"luigis_mansion:flashlight"}}}].components set value {"minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:item_model":"luigis_mansion:flashlight","minecraft:custom_model_data":{flags:[B;1b]},"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.flashlight"},"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight",is_nozzle:1b,kill:1b,keep_when_shrunk:1b,model_data:{on:{components:{"minecraft:custom_model_data":{flags:[B;1b]}}},off:{components:{"minecraft:custom_model_data":{flags:[B;0b]}}}}}}
execute if entity @s[tag=using_selection_menu] if entity @s[tag=!flashlight] run data modify storage luigis_mansion:data imy_memory.selection_menu.nventory[{components:{"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight"}}}] merge from storage luigis_mansion:data my_memory.selection_menu.inventory[{components:{"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight"}}}].components."minecraft:custom_data".model_data.off
execute if entity @s[scores={Shrunk=1..}] run data modify storage luigis_mansion:data my_memory.inventory[{components:{"minecraft:custom_data":{is_poltergust:1b}}}].components set value {"minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:custom_model_data":{flags:[B;0b],strings:["nozzle"]},"minecraft:item_model":"luigis_mansion:poltergust_3000","minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.poltergust_3000"},"minecraft:lore":[{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.none",color:"gray"}]}],"minecraft:custom_data":{namespace:"luigis_mansion",id:"poltergust_3000",is_poltergust:1b,is_nozzle:1b,model_data:{body_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body"]}}}}}},body_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body"]}}}}}},body_sat_on_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_sat_on"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_sat_on"]}}}}}},body_sat_on_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_sat_on"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_sat_on"]}}}}}},body_idle_right:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_idle"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_idle"]}}}}}},body_idle_left:{components:{"minecraft:custom_model_data":{flags:[B;1b],strings:["body_idle"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[B;0b],strings:["body_idle"]}}}}}}},kill:1b}}
execute if entity @s[scores={Shrunk=1..}] if data storage luigis_mansion:data my_memory{poltergust_element:"fire"} run data modify storage luigis_mansion:data my_memory.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.fire",color:"red"}]}]
execute if entity @s[scores={Shrunk=1..}] if data storage luigis_mansion:data my_memory{poltergust_element:"water"} run data modify storage luigis_mansion:data my_memory.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.water",color:"blue"}]}]
execute if entity @s[scores={Shrunk=1..}] if data storage luigis_mansion:data my_memory{poltergust_element:"ice"} run data modify storage luigis_mansion:data my_memory.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.ice",color:"white"}]}]
execute if entity @s[scores={Shrunk=1..}] run data modify storage luigis_mansion:data my_memory.inventory[{components:{"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight"}}}].components set value {"minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:item_model":"luigis_mansion:flashlight","minecraft:custom_model_data":{flags:[B;1b]},"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.flashlight"},"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight",is_nozzle:1b,kill:1b,keep_when_shrunk:1b,model_data:{on:{components:{"minecraft:custom_model_data":{flags:[B;1b]}}},off:{components:{"minecraft:custom_model_data":{flags:[B;0b]}}}}}}
execute if entity @s[scores={Shrunk=1..}] if entity @s[tag=!flashlight] run data modify storage luigis_mansion:data my_memory.inventory[{components:{"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight"}}}] merge from storage luigis_mansion:data my_memory.inventory[{components:{"minecraft:custom_data":{namespace:"luigis_mansion",id:"flashlight"}}}].components."minecraft:custom_data".model_data.off
data modify storage luigis_mansion:data memory append from storage luigis_mansion:data my_memory
data remove storage luigis_mansion:data my_memory