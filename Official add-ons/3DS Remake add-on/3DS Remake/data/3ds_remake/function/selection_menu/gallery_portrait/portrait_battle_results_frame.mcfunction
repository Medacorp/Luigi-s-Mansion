tag @s add gallery_portrait_menu

data modify storage luigis_mansion:data menu_options set value {no_exit:1b,options:[]}

execute store result score #temp Time run function 3ds_remake:selection_menu/gallery_portrait/get_portrait_ghost_rank with storage luigis_mansion:data current_state.current_data.portrait_battle

data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:furniture/gallery_portrait/neville","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:custom_model_data":{strings:["bronze"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"3ds_remake:item.menu.gallery_portrait.change_frame.bronze"},"minecraft:custom_data":{option:{id:"reload"}}}}
execute if score #temp Time matches 1.. run data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:furniture/gallery_portrait/neville","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:custom_model_data":{strings:["silver"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"3ds_remake:item.menu.gallery_portrait.change_frame.silver"},"minecraft:custom_data":{option:{id:"reload"}}}}
execute if score #temp Time matches 2.. run data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:furniture/gallery_portrait/neville","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:custom_model_data":{strings:["gold"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"3ds_remake:item.menu.gallery_portrait.change_frame.gold"},"minecraft:custom_data":{option:{id:"reload"}}}}
execute if score #temp Time matches 3.. run data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:furniture/gallery_portrait/neville","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:custom_model_data":{strings:["platinum"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"3ds_remake:item.menu.gallery_portrait.change_frame.platinum"},"minecraft:custom_data":{option:{id:"reload"}}}}

data modify storage luigis_mansion:data menu_options.options[].components."minecraft:item_model" set from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:item_model"
execute if data storage luigis_mansion:data menu_options.options[3] run data modify storage luigis_mansion:data menu_options.options[3] merge from storage luigis_mansion:data current_state.current_data.portrait_battle.portraits.components."minecraft:custom_data".model_data.platinum

data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:menu/dialog/progress","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.menu.dialog.progress"},"minecraft:custom_data":{option:{id:"portrait_battle_results_retry"}}}}

function luigis_mansion:entities/player/selection_menu/load