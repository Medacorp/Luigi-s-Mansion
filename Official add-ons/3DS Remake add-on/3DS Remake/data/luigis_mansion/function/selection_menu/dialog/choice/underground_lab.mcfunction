tag @s add in_dialog
tag @s add dialog_menu
tag @s add dialog_choice_menu
data modify storage luigis_mansion:data menu_options set value {no_exit:1b,options:[]}
function #luigis_mansion:selection_menu/dialog/choice/underground_lab
data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:menu/dialog/choice/training","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.menu.dialog.underground_lab.training"},"minecraft:custom_data":{option:{id:"reload",action:"select_branch",value:"training"}}}}
data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:menu/dialog/choice/gallery","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.menu.dialog.underground_lab.gallery"},"minecraft:custom_data":{option:{id:"reload",action:"select_branch",value:"gallery"}}}}
data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:menu/dialog/choice/ghost_portrificationizer","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.menu.dialog.underground_lab.portrificationizer"},"minecraft:custom_data":{option:{id:"reload",action:"select_branch",value:"portrificationizer"}}}}
data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:menu/dialog/choice/load_save","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.menu.dialog.underground_lab.old_data"},"minecraft:custom_data":{option:{id:"reload",action:"select_branch",value:"load_data"}}}}
data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:menu/dialog/choice/save","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.menu.dialog.save.yes"},"minecraft:custom_data":{option:{id:"reload",action:"save_progress"}}}}
execute unless entity @a[tag=gooigi,limit=1] run data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"3ds_remake:menu/dialog/choice/gooigi","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"3ds_remake:item.menu.dialog.underground_lab.use_gooigi"},"minecraft:custom_data":{option:{id:"reload",action:"select_branch",value:"use_gooigi"}}}}
execute if entity @a[tag=gooigi,limit=1] run data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"3ds_remake:menu/dialog/choice/gooigi","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"3ds_remake:item.menu.dialog.underground_lab.leave_gooigi"},"minecraft:custom_data":{option:{id:"reload",action:"select_branch",value:"leave_gooigi"}}}}
data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"3ds_remake:menu/dialog/choice/amiibo","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"3ds_remake:item.menu.dialog.underground_lab.change_amiibo"},"minecraft:custom_data":{option:{id:"reload",action:"select_branch",value:"change_amiibo"}}}}
data modify storage luigis_mansion:data menu_options.options append value {id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:item_model":"luigis_mansion:menu/dialog/choice/no","minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:attribute_modifiers":[],"minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.menu.dialog.underground_lab.nowhere"},"minecraft:custom_data":{option:{id:"reload",action:"select_branch",value:"nowhere"}}}}

function luigis_mansion:entities/player/selection_menu/load