execute store result score #temp ActionTime run clear @a[tag=this_player,limit=1] *[minecraft:custom_data~{is_poltergust:1b}] 0
execute if score #temp ActionTime matches 0 run function luigis_mansion:entities/luigi/get_available_slot
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 run function luigis_mansion:entities/luigi/get_owner_memory
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 if entity @s[scores={ElementMeter=0}] run data modify storage luigis_mansion:data my_memory.poltergust_element set value "none"
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 run data modify entity @s data.inventory append value {Slot:0b,id:"minecraft:carrot_on_a_stick",count:1,components:{"minecraft:unbreakable":{},"minecraft:tooltip_display":{hidden_components:["minecraft:unbreakable"]},"minecraft:custom_model_data":{flags:[0b],strings:["nozzle"]},"minecraft:item_model":"luigis_mansion:poltergust_3000","minecraft:item_name":{type:"translatable",translate:"luigis_mansion:item.poltergust_3000"},"minecraft:lore":[{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.none",color:"gray"}]}],"minecraft:custom_data":{namespace:"luigis_mansion",id:"poltergust_3000",is_poltergust:1b,is_nozzle:1b,model_data:{body_right:{components:{"minecraft:custom_model_data":{flags:[0b],strings:["body"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[1b],strings:["body"]}}}}}},body_left:{components:{"minecraft:custom_model_data":{flags:[1b],strings:["body"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[0b],strings:["body"]}}}}}},body_sat_on_right:{components:{"minecraft:custom_model_data":{flags:[0b],strings:["body_sat_on"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[1b],strings:["body_sat_on"]}}}}}},body_sat_on_left:{components:{"minecraft:custom_model_data":{flags:[1b],strings:["body_sat_on"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[0b],strings:["body_sat_on"]}}}}}},body_idle_right:{components:{"minecraft:custom_model_data":{flags:[0b],strings:["body_idle"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[1b],strings:["body_idle"]}}}}}},body_idle_left:{components:{"minecraft:custom_model_data":{flags:[1b],strings:["body_idle"]},"minecraft:custom_data":{mirror:{components:{"minecraft:custom_model_data":{flags:[0b],strings:["body_idle"]}}}}}}},kill:1b}}}
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 store result entity @s data.inventory[-1].Slot byte 1 run scoreboard players get @s AvailableSlot
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 if data storage luigis_mansion:data my_memory{poltergust_element:"fire"} run data modify entity @s data.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.fire",color:"red"}]}]
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 if data storage luigis_mansion:data my_memory{poltergust_element:"water"} run data modify entity @s data.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.water",color:"blue"}]}]
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 if data storage luigis_mansion:data my_memory{poltergust_element:"ice"} run data modify entity @s data.inventory[-1].components."minecraft:lore" set value [{italic:false,color:"gray",type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element",with:[{type:"translatable",translate:"luigis_mansion:item.poltergust_3000.element.ice",color:"white"}]}]
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 run data modify storage luigis_mansion:data memory append from storage luigis_mansion:data my_memory
execute if score #temp ActionTime matches 0 unless score @s AvailableSlot matches -1 run data remove storage luigis_mansion:data my_memory
scoreboard players reset #temp ActionTime